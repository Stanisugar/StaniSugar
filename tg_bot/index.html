<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <title>uitgb</title>
   <link rel="stylesheet" href="css/main.css">
</head>
<body>
  <div>
    <h1 align = "center">
      Введите свойства жидкостей
    </h1>
    <form method="post" id="form" name="form">
      <div>
        <div class="label">
          <label>Плотность при 20<sup>o</sup>C, кг/м<sup>3</sup></label>
          <input type="text" name="density" placeholder="853,5" minlength="5" maxlength="5" required>
        </div>
        <div class="label">
          <label>Вязкость при 20<sup>o</sup>C, мм<sup>2</sup>/с</label>
          <input type="text" name="viscousity" placeholder="10,2" minlength="6" maxlength="6" required>
        </div>
        <div class="label">
          <label>Асфальтены, масс. %</label>
          <input type="text" name="Asphaltene" placeholder="3,2" maxlength="4" minlength="4" required>
        </div>
        <div class="label">
          <label>Смолы, масс. %</label>
          <input type="text" name="Gums" placeholder="8,7" maxlength="4" minlength="4" required>
        </div>
        <div class="label">
          <label>Парафины, масс. %</label>
          <input type="text" name="Parafins" placeholder="1,5" maxlength="4" minlength="4"required>
        </div>
        <div class="label">
          <label>Плотность воды при 20<sup>o</sup>C, кг/м<sup>3</sup></label>
          <input type="text" name="Water_density" placeholder="1004,2" maxlength="6" minlength="6" required>
        </div>
        <div class="label">
          <label>pH воды, ед. pH</label>
          <input type="text" name="Water_pH" placeholder="6,5" maxlength="3" minlength="3" required>
        </div>
        <div class="label">
          <label>Начальное сдержание воды, об %</label>
          <input class ="sub_text" type="text" name="Start_water" placeholder="30,0" minlength="4" maxlength="4" required>
        </div>
        <div class="label">
          <label>Конечное сдержание воды, об %</label>
          <input type="text" name="Finish_water" placeholder="10,0" minlength="4" maxlength="4" required >
        </div>
        <div class="button_field">
          <button type="reset" id="reset"> Очистить </button>
          <button type="submit" id="calc"> Рассчитать </button>
        </div>
      </div>
    </form>
     <!-- <script src ="./h.js"> </script> -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script>
    let tg = window.Telegram.WebApp;
    tg.expand()
    let form = document.getElementById('form')
    function getValues(event){
      event.preventDefault();
      let fields = document.querySelectorAll('input');
      let values = {};
      fields.forEach(field => {
        let {name, value} = field;

        values[name] = value;
    });
       console.log(JSON.stringify(values))
       tg.sendData(JSON.stringify(values));
       tg.close()
     }
     form.addEventListener('submit', getValues);

   </script>
</body>
</html>
